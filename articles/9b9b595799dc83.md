---
title: "GitHub Desktopでgit: 'secrets' is not a git commandとエラーが出る"
emoji: "❗️"
type: "tech"
topics: ["github"]
published: true
---

`git-secrets` へのシンボリックリンクを、GitHub Desktopのパッケージ内に作成します。

```bash
$ ln -s /usr/local/bin/git-secrets /Applications/GitHub\ Desktop.app/Contents/Resources/app/git/libexec/git-core/git-secrets
```

`git-secrets` を導入している環境で、以前も上記のエラーが発生したことがありました。2022年に入り何かの加減で再発しました。

問題はおそらくGitHub Desktopに同梱されている `git` から見た場合、 `secrets` というサブコマンドが見当たらない一方で、 `.git/hooks/pre-commit` に `git secrets --pre_commit_hook -- "$@"` が書かれてあるため、エラーになっていると思います。

次のコマンドがコマンド履歴にあったため試しましたが、効果がありませんでした。ディレクトリの構成か何かが変わったようです。

```bash
$ ln -s /usr/local/bin/git-secrets /Applications/GitHub\ Desktop.app/Contents/Resources/app/git/bin/git-secrets
```
